<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FWå‹•ä½œãƒ‡ãƒ¢ï¼ˆè¦–èªæ€§å‘ä¸Šç‰ˆï¼‰</title>
<style>
  body {
    font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: #f4f6f9;
    padding: 20px;
    color: #333;
  }

  /* --- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« --- */
  .controls {
    margin-bottom: 20px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
    max-width: 900px;
  }
  .btn {
    padding: 12px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    color: white;
    transition: all 0.2s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }
  .btn-auto { background-color: #34495e; }
  .btn-manual-1 { background-color: #27ae60; } 
  .btn-manual-4 { background-color: #3498db; } 
  .btn-manual-2 { background-color: #d81b60; } 
  .btn-manual-3 { background-color: #c0392b; } 
  .active-mode { outline: 4px solid rgba(0,0,0,0.15); transform: scale(1.05); }

  .status-text {
    margin-top: 5px;
    font-weight: bold;
    font-size: 18px;
    color: #2c3e50;
    height: 30px;
    margin-bottom: 15px;
  }

  /* --- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ --- */
  .container {
    position: relative;
    width: 900px;
    height: 600px;
    background-color: white;
    border-radius: 12px;
    box-shadow: 0 4px 25px rgba(0,0,0,0.15);
    overflow: hidden;
  }

  /* --- èƒŒæ™¯ãƒ¬ã‚¤ãƒ¤ãƒ¼ --- */
  .bg-layer { position: absolute; width: 100%; height: 100%; z-index: 1; }
  .cable-h { position: absolute; top: 220px; left: 180px; width: 580px; height: 12px; background-color: #bdc3c7; border-radius: 6px; }
  .cable-v-dmz { position: absolute; top: 220px; left: 440px; width: 12px; height: 180px; background-color: #bdc3c7; }
  .cable-v-internal { position: absolute; top: 220px; left: 700px; width: 12px; height: 80px; background-color: #bdc3c7; }

  /* å„ã‚¾ãƒ¼ãƒ³ */
  .zone-internet { position: absolute; top: 140px; left: 30px; width: 220px; text-align: center; z-index: 2; }
  .cloud-visual { font-size: 80px; line-height: 1; margin-bottom: 10px; opacity: 0.8; }
  .cloud-text { font-weight: bold; color: #555; font-size: 18px; }

  .firewall { position: absolute; top: 150px; left: 420px; width: 55px; height: 160px; background: repeating-linear-gradient(45deg, #d35400, #d35400 12px, #e67e22 12px, #e67e22 24px); border: 4px solid #a04000; z-index: 5; box-shadow: 5px 5px 15px rgba(0,0,0,0.3); }
  .fw-label { position: absolute; top: 120px; left: 405px; width: 90px; text-align: center; font-size: 14px; font-weight: bold; color: #d35400; }

  .zone-internal { position: absolute; top: 310px; left: 640px; text-align: center; width: 140px; }
  .pc-visual { font-size: 60px; margin-bottom: 10px; }
  .pc-label { font-weight:bold; color:#2c3e50; font-size: 16px; line-height: 1.4; }

  .zone-dmz { position: absolute; top: 410px; left: 365px; width: 160px; padding: 20px; border: 4px dashed #f1c40f; background-color: #fffdf0; border-radius: 15px; text-align: center; }
  .server-visual { font-size: 50px; margin-bottom: 5px; }
  .dmz-title { color: #f39c12; font-weight: bold; font-size: 20px; display: block; }
  .dmz-label { font-size: 14px; font-weight: bold; color: #7f6000; }

  .blocked-msg { position: absolute; font-size: 20px; font-weight: 900; color: white; background: #e74c3c; padding: 10px 20px; border-radius: 30px; opacity: 0; pointer-events: none; z-index: 25; box-shadow: 0 4px 15px rgba(231,76,60,0.4); }

  /* --- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š --- */
  .overlay-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 20; }
  .packet { opacity: 0; }
  
  /* ã‚¢ã‚¤ã‚³ãƒ³ã¨æ–‡å­—ã®ã‚µã‚¤ã‚ºè¨­å®š */
  .p-icon { font-size: 45px; } /* ã‚¢ã‚¤ã‚³ãƒ³ã‚’å¤§ãã */
  .p-text { font-size: 18px; font-weight: bold; filter: drop-shadow(0 0 2px white); } /* æ–‡å­—ã‚’å¤§ãã */

  /* â‘  å…¬é–‹Webé–²è¦§ (å¾€å¾© 8ç§’ã‹ã‘ã¦ã‚†ã£ãã‚Šç§»å‹•) */
  @keyframes path-viewing-slow {
    0%   { opacity: 0; transform: translate(140px, 215px); }
    5%   { opacity: 1; transform: translate(140px, 215px); }
    40%  { transform: translate(435px, 215px); } /* FW */
    50%  { transform: translate(435px, 420px); } /* Serverç€ */
    60%  { transform: translate(435px, 420px); } /* æ»ç•™ */
    70%  { transform: translate(435px, 215px); } /* FWæˆ»ã‚Š */
    95%  { opacity: 1; transform: translate(140px, 215px); }
    100% { opacity: 0; transform: translate(140px, 215px); }
  }
  
  @keyframes icon-switch-req { 0%, 55% { opacity: 1; } 56%, 100% { opacity: 0; } }
  @keyframes icon-switch-res { 0%, 55% { opacity: 0; } 56%, 100% { opacity: 1; } }

  /* â‘¡ ãƒ•ã‚¡ã‚¤ãƒ«é€ä¿¡ (6ç§’) */
  @keyframes path-upload-slow {
    0%   { opacity: 0; transform: translate(700px, 320px); }
    10%  { opacity: 1; transform: translate(700px, 320px); }
    40%  { transform: translate(700px, 215px); }
    80%  { transform: translate(445px, 215px); }
    95%  { transform: translate(445px, 420px); opacity: 1; }
    100% { transform: translate(445px, 420px); opacity: 0; }
  }

  /* ä¸æ­£è¦æ±‚ (6ç§’) */
  @keyframes path-bad-req-slow {
    0% { opacity: 1; transform: translate(var(--start-x), var(--start-y)); }
    50% { transform: translate(440px, var(--fw-y)); }
    65% { transform: translate(520px, var(--fw-y)); opacity: 1; } /* æŠœã‘ã‚ˆã†ã¨ã™ã‚‹ */
    75% { transform: translate(440px, var(--fw-y)); opacity: 0; } /* å¼¾ã‹ã‚Œã‚‹ */
    100% { opacity: 0; }
  }

  @keyframes flash-text { 0%, 100% { opacity: 0; transform: scale(0.8); } 20%, 80% { opacity: 1; transform: scale(1.1); } }

  /* åˆ¶å¾¡ç”¨ã‚¯ãƒ©ã‚¹ */
  .mode-1 #p-view { animation: path-viewing-slow 8s infinite ease-in-out; }
  .mode-1 #p-view .req-part { animation: icon-switch-req 8s infinite; }
  .mode-1 #p-view .res-part { animation: icon-switch-res 8s infinite; }
  
  .mode-4 #p-upload { animation: path-upload-slow 6s infinite ease-in-out; }
  
  .mode-2 #p-dmz-atk { --start-x: 450px; --start-y: 420px; --fw-y: 250px; animation: path-bad-req-slow 5s infinite; }
  .mode-2 #msg-lower { animation: flash-text 5s infinite; animation-delay: 2.5s; }
  
  .mode-3 #p-int-atk { --start-x: 140px; --start-y: 215px; --fw-y: 215px; animation: path-bad-req-slow 5s infinite; }
  .mode-3 #msg-upper { animation: flash-text 5s infinite; animation-delay: 2.5s; }

</style>
</head>
<body>

<div class="controls">
  <button class="btn btn-auto active-mode" onclick="setMode('auto', this)">è‡ªå‹•å·¡å›</button>
  <button class="btn btn-manual-1" onclick="setMode('manual-1', this)">â‘  Webé–²è¦§è¦æ±‚ï¼†æä¾›</button>
  <button class="btn btn-manual-4" onclick="setMode('manual-4', this)">â‘¡ ãƒ•ã‚¡ã‚¤ãƒ«é€ä¿¡</button>
  <button class="btn btn-manual-2" onclick="setMode('manual-2', this)">â‘¢ æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿é–²è¦§è¦æ±‚ (æ‹’å¦)</button>
  <button class="btn btn-manual-3" onclick="setMode('manual-3', this)">â‘£ å†…éƒ¨å¥ªå–è©¦è¡Œ (æ‹’å¦)</button>
</div>

<div class="status-text" id="status-display">è‡ªå‹•å†ç”Ÿä¸­...</div>

<div class="container" id="stage">
  <div class="bg-layer">
    <div class="cable-h"></div><div class="cable-v-dmz"></div><div class="cable-v-internal"></div>
    
    <div class="zone-internet">
      <div class="cloud-visual">â˜ï¸</div>
      <div class="cloud-text">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ</div>
    </div>
    
    <div class="fw-label">Firewall</div><div class="firewall"></div>
    
    <div class="zone-internal">
      <div class="pc-visual">ğŸ’»</div>
      <div class="pc-label">å†…éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯<br>(ç¤¾å†…PC)</div>
    </div>
    
    <div class="zone-dmz">
      <span class="dmz-title">DMZ</span>
      <div class="server-visual">ğŸ–¥ï¸</div>
      <div class="dmz-label">å…¬é–‹Webã‚µãƒ¼ãƒ</div>
    </div>

    <div class="blocked-msg" id="msg-upper" style="top: 180px; left: 520px;">ã‚¢ã‚¯ã‚»ã‚¹ã‚’é®æ–­ã—ã¾ã—ãŸï¼</div>
    <div class="blocked-msg" id="msg-lower" style="top: 260px; left: 520px;">ä¸æ­£ãªè¦æ±‚ã‚’æ‹’å¦ã—ã¾ã—ãŸï¼</div>
  </div>

  <svg class="overlay-svg">
    <g id="p-view" class="packet">
        <g class="req-part">
            <text x="0" y="0" class="p-icon">ğŸ”</text>
            <text x="-40" y="30" class="p-text" fill="#27ae60">Webé–²è¦§è¦æ±‚</text>
        </g>
        <g class="res-part">
            <text x="0" y="0" class="p-icon">ğŸ–¼ï¸</text>
            <text x="-40" y="30" class="p-text" fill="#2980b9">ãƒšãƒ¼ã‚¸ã‚’æä¾›</text>
        </g>
    </g>

    <g id="p-upload" class="packet">
      <text x="0" y="0" class="p-icon">ğŸ“„</text>
      <text x="-30" y="30" class="p-text" fill="#2980b9">ãƒ•ã‚¡ã‚¤ãƒ«é€ä¿¡</text>
    </g>

    <g id="p-dmz-atk" class="packet">
      <text x="0" y="0" class="p-icon">ğŸ”</text>
      <text x="-40" y="30" class="p-text" fill="#e91e63">æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿é–²è¦§è¦æ±‚</text>
    </g>

    <g id="p-int-atk" class="packet">
      <text x="0" y="0" class="p-icon">ğŸ”</text>
      <text x="-40" y="30" class="p-text" fill="#c0392b">å†…éƒ¨ãƒ‡ãƒ¼ã‚¿å¥ªå–è¦æ±‚</text>
    </g>
  </svg>
</div>

<script>
  let autoInterval = null;
  const stage = document.getElementById('stage');
  const statusDisplay = document.getElementById('status-display');

  startAutoMode();

  function setMode(mode, btnElement) {
    document.querySelectorAll('.btn').forEach(b => b.classList.remove('active-mode'));
    if(btnElement) btnElement.classList.add('active-mode');
    resetAnimations();
    if (autoInterval) clearInterval(autoInterval);

    if (mode === 'auto') {
      statusDisplay.textContent = "è‡ªå‹•å†ç”Ÿä¸­...";
      startAutoMode();
    } else {
      const modes = {'manual-1':'mode-1', 'manual-4':'mode-4', 'manual-2':'mode-2', 'manual-3':'mode-3'};
      stage.classList.add(modes[mode]);
      statusDisplay.textContent = btnElement.textContent;
    }
  }

  function resetAnimations() {
    stage.classList.remove('mode-1', 'mode-2', 'mode-3', 'mode-4');
    void stage.offsetWidth;
  }

  function startAutoMode() {
    let step = 0;
    const runStep = () => {
      resetAnimations();
      const modes = ['mode-1', 'mode-4', 'mode-2', 'mode-3'];
      stage.classList.add(modes[step]);
      step = (step + 1) % modes.length;
    };
    runStep();
    autoInterval = setInterval(runStep, 9000); // å·¡å›ã‚‚ã‚†ã£ãŸã‚Šã«
  }
</script>

</body>
</html>
